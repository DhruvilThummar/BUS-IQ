<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üöç BUSIQ Transit Dashboard | Real-Time Public Transit Monitoring</title>
    <meta name="description"
        content="BUSIQ Transit Dashboard is a real-time platform to monitor bus fleets, optimize schedules, detect delays, and improve passenger experience." />
    <meta name="keywords"
        content="BUSIQ, Transit Dashboard, Public Transport Monitoring, Real-time Bus Tracking, Fleet Management, Bus Optimization, Smart Transit, Bus Bunching Solution" />
    <meta name="author" content="The Dev Force" />
    <link rel="canonical" href="https://your-domain-or-github-pages-link" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="BUSIQ Transit Dashboard" />
    <meta property="og:url" content="https://your-domain-or-github-pages-link" />
    <meta property="og:title" content="BUSIQ Transit Dashboard ‚Äì Real-Time Public Transit Monitoring" />
    <meta property="og:description"
        content="Monitor buses, optimize routes, and improve transit efficiency with BUSIQ ‚Äì a smart dashboard for public transport." />
    <meta property="og:image"
        content="https://github.com/DhruvilThummar/BUS-IQ/blob/2a6a02f1bf8238e108c0a79f467844b990aedf0a/image/BusIQ.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://your-domain-or-github-pages-link" />
    <meta name="twitter:title" content="BUSIQ Transit Dashboard ‚Äì Real-Time Public Transit Monitoring" />
    <meta name="twitter:description"
        content="Discover BUSIQ ‚Äì a real-time transit dashboard for smarter bus fleet monitoring and optimization." />
    <meta name="twitter:image"
        content="https://github.com/DhruvilThummar/BUS-IQ/blob/2a6a02f1bf8238e108c0a79f467844b990aedf0a/image/BusIQ.png" />

    <!-- Dublin Core -->
    <meta name="DC.title" content="BUSIQ Transit Dashboard ‚Äì Real-Time Transit Monitoring" />
    <meta name="DC.creator" content="The Dev Force" />
    <meta name="DC.description"
        content="BUSIQ helps cities and operators manage buses, detect delays, and improve passenger satisfaction." />
    <meta name="DC.language" content="en" />
    <meta name="DC.rights" content="Copyright 2025 The Dev Force" />

    <!-- Favicon & Icons -->
    <link rel="icon"
        href="https://github.com/DhruvilThummar/BUS-IQ/blob/2a6a02f1bf8238e108c0a79f467844b990aedf0a/image/BusIQ.ico" />
    <link rel="icon"
        href="https://github.com/DhruvilThummar/BUS-IQ/blob/2a6a02f1bf8238e108c0a79f467844b990aedf0a/image/BusIQ.svg"
        type="image/svg+xml" />
    <link rel="apple-touch-icon"
        href="https://github.com/DhruvilThummar/BUS-IQ/blob/2a6a02f1bf8238e108c0a79f467844b990aedf0a/image/BusIQ.png" />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "BUSIQ Transit Dashboard",
        "applicationCategory": "Public Transit Management",
        "operatingSystem": "Web",
        "url": "https://your-domain-or-github-pages-link",
        "image": "https://your-domain-or-github-pages-link/assets/busiq-og.png",
        "author": {
          "@type": "Organization",
          "name": "The Dev Force"
        },
        "description": "BUSIQ is a real-time dashboard to monitor buses, optimize schedules, and enhance passenger experience."
      }
      </script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet.js for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Chart.js for Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Socket.IO Client Library -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Custom Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            /* Light: bg-slate-100 */
            color: #1e293b;
            /* Light: text-slate-800 */
        }

        .dark body {
            background-color: #0f172a;
            /* Dark: bg-slate-900 */
            color: #e2e8f0;
            /* Dark: text-slate-200 */
        }

        /* Leaflet Map Customizations */
        .leaflet-popup-content-wrapper,
        .leaflet-popup-tip {
            background-color: #ffffff;
            /* Light mode popup */
            color: #1e293b;
        }

        .dark .leaflet-popup-content-wrapper,
        .dark .leaflet-popup-tip {
            background-color: #1e293b;
            /* Dark: bg-slate-800 */
            color: #e2e8f0;
            /* Dark: text-slate-200 */
        }

        .leaflet-container a.leaflet-popup-close-button {
            color: #64748b;
            /* Light mode close button */
        }

        .dark .leaflet-container a.leaflet-popup-close-button {
            color: #94a3b8;
            /* Dark: text-slate-400 */
        }

        .leaflet-control-zoom-in,
        .leaflet-control-zoom-out {
            background-color: #ffffff !important;
            color: #1e293b !important;
            border-color: #cbd5e1 !important;
        }

        .dark .leaflet-control-zoom-in,
        .dark .leaflet-control-zoom-out {
            background-color: #1e293b !important;
            color: #e2e8f0 !important;
            border-color: #334155 !important;
        }

        .leaflet-container {
            background-color: #f1f5f9;
        }

        .dark .leaflet-container {
            background-color: #0f172a;
        }


        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #e2e8f0;
        }

        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Loading Spinner */
        .loader {
            border: 4px solid #94a3b8;
            border-top: 4px solid #0ea5e9;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        .dark .loader {
            border: 4px solid #475569;
            border-top: 4px solid #38bdf8;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5000;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .switch input {
            display: none;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 9999px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: #0ea5e9;
        }

        input:checked+.slider:before {
            transform: translateX(20px);
        }


        .dark .loading-overlay {
            background-color: rgba(15, 23, 42, 0.7);
        }

        /* Chatbot Bubble */
#chatbot-bubble {
    width: 65px;
    height: 65px;
    border-radius: 50%;
    background: linear-gradient(135deg, #0ea5e9, #0284c7);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
    transition: transform 0.3s, box-shadow 0.3s;
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
}
#chatbot-bubble:hover {
    transform: scale(1.15);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
}

/* Chat Window */
#chatbot-window {
    width: 380px;
    height: 520px;
    border-radius: 20px;
    display: none;
    flex-direction: column;
    position: fixed;
    bottom: 100px;
    right: 30px;
    overflow: hidden;
    backdrop-filter: blur(15px);
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
    transition: all 0.4s ease;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Dark Mode Chat Window */
.dark #chatbot-window {
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.15);
}

/* Chat Header */
#chat-header {
    padding: 12px 15px;
    border-bottom: 1px solid rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    font-weight: 600;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
}

/* Chat Messages Area */
#chat-messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Chat Bubble Styles */
.chat-bubble {
    padding: 10px 16px;
    border-radius: 18px;
    max-width: 70%;
    word-wrap: break-word;
    font-size: 14px;
    line-height: 1.4;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.3s;
}

.user-msg {
    background: linear-gradient(135deg, #0ea5e9, #0284c7);
    color: #fff;
    margin-left: auto;
    border-bottom-right-radius: 4px;
}

.bot-msg {
    background: rgba(241, 245, 249, 0.8);
    color: #1e293b;
    margin-right: auto;
    border-bottom-left-radius: 4px;
}

.dark .bot-msg {
    background: rgba(51, 65, 85, 0.8);
    color: #f1f5f9;
}

/* Chat Input */
#chat-input {
    width: 95%;
    margin: 10px auto;
    padding: 10px 15px;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    outline: none;
    transition: all 0.3s;
}
#chat-input:focus {
    border-color: #0ea5e9;
    box-shadow: 0 0 10px rgba(14,165,233,0.5);
}
.dark #chat-input {
    background: rgba(51,65,85,0.4);
    border-color: rgba(255,255,255,0.2);
    color: #e2e8f0;
}

    </style>
    <script>
        // Tailwind dark mode configuration
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: { 900: '#0f172a', 800: '#1e293b', 700: '#334155', 600: '#475569', 100: '#f1f5f9', 50: '#f8fafc' },
                        sky: { 600: '#0284c7', 500: '#0ea5e9', 400: '#38bdf8' }
                    }
                }
            }
        }
    </script>
</head>

<body class="text-slate-800 dark:bg-slate-900 dark:text-slate-200">
    <canvas id="poly-grid-bg" class="fixed top-0 left-0 w-full h-full -z-10 pointer-events-none"></canvas>
    <nav
        class="bg-gradient-to-r from-blue-400 via-green-850 to-red-1070 flex items-center justify-center flex-col h-screen w-screen">
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loader"></div>
        </div>
        <button id="theme-toggle" onclick="toggleTheme()"
            class="fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg">
            Toggle
        </button>


        <!-- Center Content -->
        <div class="flex flex-col items-top justify-top text-center space-y-4">
            <!-- Logo -->
            <div class="w-25 h-25">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" viewBox="0 0 1024 1024"
                    enable-background="new 0 0 1024 1024" xml:space="preserve">
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M515.215454,276.440369 
                            	C516.322937,272.743011 519.061523,273.773468 521.182922,273.873169 
                            	C540.477783,274.779999 559.714172,276.275696 578.851990,279.072052 
                            	C587.612488,280.352112 596.333008,281.727112 604.622559,284.801880 
                            	C621.988953,291.243378 631.047119,304.219727 633.256348,322.337036 
                            	C633.799561,326.792084 634.543274,331.224670 635.001709,335.687378 
                            	C635.303650,338.626495 636.777954,339.741089 639.613037,339.595154 
                            	C643.936462,339.372650 648.265442,339.137329 652.592468,339.129547 
                            	C662.668274,339.111420 667.591919,343.400391 669.043457,353.403503 
                            	C669.292297,355.118408 669.469604,356.712067 671.188416,357.613037 
                            	C675.412903,359.827362 676.745789,363.728790 676.820618,368.063629 
                            	C676.998840,378.392975 677.169434,388.731232 676.924438,399.055969 
                            	C676.760498,405.960327 672.300903,410.067566 665.392151,410.324951 
                            	C662.410461,410.436035 659.338623,410.509338 656.439819,409.934143 
                            	C651.386658,408.931458 647.889893,404.553070 647.794739,399.064514 
                            	C647.604126,388.068329 647.781311,377.066071 647.643494,366.068390 
                            	C647.581726,361.140198 651.493896,359.051544 654.331299,356.227051 
                            	C652.093506,353.576416 640.963562,352.275818 638.671753,354.222046 
                            	C637.461975,355.249390 637.662903,356.532410 637.822754,357.892975 
                            	C640.131592,377.546509 642.626038,397.181641 644.628540,416.866669 
                            	C646.077271,431.107971 647.292847,445.443604 643.316772,459.543488 
                            	C636.959961,482.085938 623.502930,497.316864 599.547485,501.460602 
                            	C596.049438,502.065704 594.084595,503.683746 592.718140,507.026093 
                            	C583.502747,529.566956 562.441406,542.630188 538.124756,541.131470 
                            	C528.126465,540.515259 516.099731,530.332764 515.575073,520.259888 
                            	C514.789368,505.175507 515.370850,490.019867 515.370850,474.748749 
                            	C521.130371,475.890930 526.094666,481.067505 526.406555,485.877625 
                            	C526.740417,491.027649 527.440063,496.257385 526.897095,501.336578 
                            	C526.082764,508.954651 528.660034,514.546753 534.741211,518.847046 
                            	C537.059387,520.486267 538.422913,523.684204 542.229797,523.398499 
                            	C543.092529,520.555603 540.991211,519.217896 539.427246,518.108704 
                            	C532.355469,513.093201 529.300781,506.494873 530.778748,497.887482 
                            	C530.806519,497.725586 530.761414,497.551666 530.785400,497.388519 
                            	C532.465149,485.953949 529.783142,476.495911 519.007751,470.425232 
                            	C516.433777,468.975067 515.601440,466.432831 515.473267,463.240997 
                            	C514.422668,437.082581 515.338379,410.920105 515.030396,384.763641 
                            	C514.976379,380.175354 516.716919,378.421570 521.228516,378.757751 
                            	C524.709717,379.017120 528.228027,378.932251 531.723267,378.811371 
                            	C536.494751,378.646240 540.603271,378.885223 543.720154,383.754913 
                            	C546.360413,387.879913 552.337524,387.743927 556.174255,384.549286 
                            	C559.918823,381.431427 560.498230,375.959503 557.506165,371.970306 
                            	C554.560120,368.042480 548.102600,366.330719 545.229065,370.022644 
                            	C537.772217,379.603027 527.901672,374.811066 519.010254,375.563354 
                            	C515.394409,375.869263 515.723572,372.670013 515.643982,370.142883 
                            	C515.558960,367.442383 516.160156,365.608215 519.435547,365.678009 
                            	C524.599365,365.788025 529.779724,365.474396 534.929993,365.758240 
                            	C539.106262,365.988403 542.164001,364.709808 544.996704,361.558380 
                            	C551.119873,354.746246 557.342834,347.981171 564.019043,341.724030 
                            	C568.413330,337.605499 570.556580,333.173126 569.775757,327.236145 
                            	C569.328796,323.838013 570.463684,321.425079 573.531616,319.282166 
                            	C578.207764,316.015869 578.572876,310.025818 575.005127,306.164581 
                            	C571.400574,302.263367 565.480530,302.180847 561.614868,305.977997 
                            	C557.852539,309.673553 558.080017,315.435120 562.140442,319.288361 
                            	C567.351929,324.233917 567.998596,331.525726 563.193298,336.832123 
                            	C556.261658,344.486542 549.013794,351.855133 541.864685,359.310913 
                            	C541.194031,360.010315 540.311035,360.865021 539.447937,360.964386 
                            	C532.313965,361.785919 525.151184,361.409454 517.997803,361.197418 
                            	C516.928711,361.165741 515.968811,360.473663 515.942993,359.366821 
                            	C515.833740,354.682556 514.168701,349.839569 518.370117,345.738617 
                            	C523.731384,340.505676 528.603699,334.770752 533.982666,329.557587 
                            	C536.862000,326.767059 538.267822,323.795654 537.926880,319.835999 
                            	C537.741699,317.684967 537.934387,315.504181 537.866821,313.339661 
                            	C537.754639,309.745483 538.058105,306.755859 541.696655,304.350037 
                            	C545.009766,302.159332 546.271973,298.257050 544.773499,294.101135 
                            	C543.384338,290.248596 540.582642,288.237946 536.497925,287.967133 
                            	C532.075928,287.673981 529.184937,289.861572 527.457520,293.701050 
                            	C525.740967,297.516449 526.847595,300.854919 529.638428,303.731537 
                            	C531.211853,305.353333 533.999451,306.050629 534.068787,308.807220 
                            	C534.193909,313.779541 535.787170,319.288605 533.464661,323.608795 
                            	C529.541199,330.907166 522.559998,335.746948 516.871704,341.627747 
                            	C516.298706,341.421295 515.725647,341.214844 515.152649,341.008362 
                            	C515.152649,319.636536 515.152649,298.264679 515.215454,276.440369 
                            M579.784851,468.785583 
                            	C575.856445,463.637939 567.581970,460.895355 570.252319,451.788666 
                            	C573.629700,451.831055 575.819214,454.458466 578.742981,454.882538 
                            	C585.682922,455.889099 591.194397,459.038239 596.384094,463.946014 
                            	C602.449402,469.681793 613.061951,470.240692 618.785095,466.352631 
                            	C620.585388,465.129578 623.187561,463.928070 621.344727,460.871826 
                            	C619.846863,458.387512 618.354004,456.985931 614.927002,458.530884 
                            	C609.765625,460.857666 606.807007,459.555267 604.307312,454.984802 
                            	C604.794312,453.591766 606.156555,453.158234 607.218628,452.411469 
                            	C621.363831,442.465759 625.086365,424.917389 615.964600,411.116089 
                            	C606.459045,396.734222 586.546936,392.868256 571.271179,402.438751 
                            	C558.395020,410.505859 554.525513,428.565399 562.840759,442.625580 
                            	C565.127380,446.492096 566.642090,450.430603 566.076599,454.911469 
                            	C565.567749,458.943634 566.894470,461.994659 570.058289,464.494263 
                            	C571.877380,465.931488 573.421692,467.717102 575.086121,469.349548 
                            	C581.392822,475.535156 581.479126,482.144806 575.337036,488.410797 
                            	C571.564575,492.259430 571.493774,497.760223 575.170654,501.350525 
                            	C578.847656,504.941010 584.983093,504.715302 588.624878,500.855621 
                            	C591.970154,497.310181 591.875610,491.765106 587.602661,488.545044 
                            	C584.147949,485.941589 583.324890,482.982483 583.660034,479.096008 
                            	C583.980164,475.383972 583.964905,471.695251 579.784851,468.785583 
                            M532.884705,425.282501 
                            	C531.860779,433.604126 533.263428,441.930573 532.855835,450.239624 
                            	C532.629456,454.852386 534.700073,455.881958 538.836121,455.786041 
                            	C542.881897,455.692200 545.879089,455.716797 545.775330,450.141876 
                            	C545.489990,434.816254 545.517883,419.478546 545.793213,404.152283 
                            	C545.885071,399.038422 543.158081,398.519470 539.266846,398.371338 
                            	C534.978516,398.208099 532.704346,399.579071 532.865967,404.330811 
                            	C533.092407,410.988403 532.902893,417.660095 532.884705,425.282501 
                            M595.644531,338.069885 
                            	C591.312195,342.663025 586.736511,347.054962 582.721191,351.910339 
                            	C579.252136,356.105164 575.180847,357.631104 569.986023,356.767578 
                            	C567.356873,356.330505 564.824402,356.326447 562.760071,358.079865 
                            	C562.914246,359.524231 563.731140,359.793518 564.554932,359.852600 
                            	C572.898865,360.451050 581.175232,361.193024 586.801453,352.754120 
                            	C588.795959,349.762421 591.907959,347.538177 594.318176,344.795166 
                            	C596.990356,341.754120 599.481384,340.155975 604.099426,341.454376 
                            	C610.051331,343.127808 614.821716,339.037506 615.205933,333.253174 
                            	C615.522339,328.489594 611.187744,323.648254 606.446716,323.469910 
                            	C600.973755,323.264038 596.393555,327.891479 596.461853,333.656250 
                            	C596.477356,334.965668 597.003296,336.289215 595.644531,338.069885 
                            M590.333862,376.955566 
                            	C583.854614,377.737305 577.094849,375.445801 570.244019,378.110413 
                            	C572.199524,380.488373 574.155334,379.918335 575.891235,379.937103 
                            	C583.889099,380.023499 591.887939,380.016876 599.886475,380.045776 
                            	C603.308472,380.058136 606.120178,380.649872 608.375610,383.970917 
                            	C611.603638,388.724060 618.380981,388.884094 622.384766,384.921417 
                            	C625.886047,381.456085 625.795105,375.325958 622.191284,371.883667 
                            	C617.926697,367.810211 611.996216,368.144440 608.260315,372.991913 
                            	C606.508423,375.265076 604.784607,376.835205 601.743225,376.759735 
                            	C598.256836,376.673187 594.763367,376.869781 590.333862,376.955566 
                            M553.519409,474.294678 
                            	C548.896362,474.438324 546.296814,477.139435 544.850647,481.228546 
                            	C543.471313,485.128571 545.046692,488.398743 548.124878,490.328369 
                            	C551.859985,492.669769 552.284424,495.779022 552.292175,499.614136 
                            	C552.298035,502.534485 551.153992,505.790070 553.969543,508.993896 
                            	C556.739685,505.273102 555.448730,501.394379 555.666382,497.841766 
                            	C555.829895,495.172882 555.590515,492.689606 558.507690,491.009125 
                            	C562.230103,488.864746 563.517273,485.240356 562.486755,481.147095 
                            	C561.454895,477.048370 558.582764,474.728729 553.519409,474.294678 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M403.918976,292.893433 
                            	C413.811005,284.164551 425.868561,281.977539 437.880432,280.041626 
                            	C458.925354,276.649872 480.166626,275.014862 501.442871,273.910736 
                            	C508.444397,273.547394 508.453827,273.681824 508.403748,280.422150 
                            	C508.315216,292.333344 509.621185,291.052277 497.674805,291.105286 
                            	C487.675385,291.149658 477.675507,291.127411 467.676514,291.213715 
                            	C462.368134,291.259521 460.228180,293.169861 460.105103,297.686066 
                            	C459.974457,302.480194 462.729523,305.623230 467.644043,305.680511 
                            	C479.475220,305.818542 491.309021,305.786987 503.141357,305.731781 
                            	C506.244843,305.717316 508.717896,305.805725 508.672974,310.056946 
                            	C508.594513,317.489044 508.373871,318.316193 503.255554,318.183167 
                            	C478.907196,317.550293 454.636444,319.316132 430.343201,320.371338 
                            	C426.354218,320.544647 422.341278,320.815125 418.405853,321.451447 
                            	C407.041718,323.288696 400.455719,330.058777 398.469666,342.110962 
                            	C394.680420,365.105743 391.924744,388.230682 390.185059,411.474213 
                            	C389.750275,417.283508 389.151337,423.082031 388.804688,428.896088 
                            	C388.086761,440.936737 392.471466,446.916138 404.116272,449.888824 
                            	C414.609344,452.567474 425.321808,451.455841 435.956818,451.594269 
                            	C442.263794,451.676361 442.266296,451.604309 442.259521,458.036316 
                            	C442.249329,467.702484 442.187744,477.368988 442.256439,487.034607 
                            	C442.275665,489.742035 441.540466,491.600372 439.117676,493.256561 
                            	C433.861450,496.849579 433.155121,502.544861 436.964569,507.031403 
                            	C440.456543,511.144043 446.907867,511.326172 450.696869,507.419006 
                            	C454.212769,503.793488 453.903259,497.006836 449.432098,493.666779 
                            	C446.426422,491.421478 445.841522,488.900940 445.869263,485.556824 
                            	C445.957611,474.891785 445.983429,464.222717 445.764252,453.560730 
                            	C445.692810,450.086823 446.809387,447.599518 449.246979,445.205872 
                            	C457.449982,437.150879 465.383972,428.820892 473.630585,420.812012 
                            	C476.604675,417.923584 478.400696,414.899872 477.735016,410.716644 
                            	C476.271362,401.518738 479.082520,394.141205 486.747559,388.603821 
                            	C488.602234,387.264008 490.245819,385.425385 491.499237,383.499115 
                            	C495.140350,377.903503 500.587189,378.865387 505.876373,379.237000 
                            	C507.666107,379.362732 508.356934,380.647156 508.301025,382.406921 
                            	C508.241852,384.269440 507.218689,385.332520 505.490723,385.165833 
                            	C494.433502,384.099182 491.064758,393.897736 485.209381,399.857391 
                            	C482.528015,402.586517 483.946716,407.285004 484.227692,411.012756 
                            	C484.651520,416.634918 482.895935,420.750793 478.750366,424.645569 
                            	C470.984619,431.941437 463.725250,439.776917 456.276123,447.408325 
                            	C455.369843,448.336761 454.130768,449.061310 453.959259,450.899872 
                            	C456.995239,452.433289 460.330292,451.588165 463.501404,451.613312 
                            	C466.724182,451.638885 468.057281,452.965912 467.989838,456.096588 
                            	C467.925262,459.094604 467.852692,462.106323 468.060455,465.092773 
                            	C468.322571,468.860718 467.448273,471.668091 463.950806,473.901062 
                            	C460.377869,476.182190 459.464050,480.023560 460.803436,484.090485 
                            	C462.013397,487.764435 464.748779,489.933899 468.574524,490.192566 
                            	C472.516998,490.459167 475.737427,488.864655 477.727478,485.279907 
                            	C480.033020,481.126709 479.159851,476.584167 474.696411,473.458679 
                            	C472.072083,471.621063 471.478943,469.588989 471.582825,466.757263 
                            	C471.698730,463.596375 471.929474,460.367950 471.442230,457.274078 
                            	C470.764008,452.967621 472.377411,449.994507 475.344940,447.119629 
                            	C482.166412,440.511200 488.714325,433.620758 495.518921,426.994354 
                            	C497.845856,424.728302 498.914459,422.314423 498.806030,419.053558 
                            	C498.612274,413.226715 498.736664,407.389191 498.733887,401.556152 
                            	C498.732971,399.641510 498.803802,397.712555 501.414215,397.636505 
                            	C503.899994,397.564087 504.497162,399.371185 504.544556,401.305389 
                            	C504.728180,408.796051 504.843903,416.289154 504.890686,423.781952 
                            	C504.905212,426.107788 503.429504,427.782227 501.888489,429.358093 
                            	C496.063721,435.314697 490.229523,441.262299 484.446899,447.259613 
                            	C483.465912,448.277008 481.911224,448.991852 482.114441,451.390564 
                            	C488.150421,451.390564 494.234497,451.596649 500.299103,451.340820 
                            	C508.754639,450.984131 508.694397,451.114807 509.098999,459.594727 
                            	C509.390778,465.709900 507.675079,470.286713 502.391815,473.506775 
                            	C495.638580,477.622742 492.560608,483.450928 493.977386,491.509033 
                            	C494.403503,493.932800 493.712646,496.545319 494.083862,498.987732 
                            	C495.290039,506.924042 492.147675,512.743835 486.129822,517.654175 
                            	C481.762573,521.217712 477.087799,521.245728 473.078247,517.038513 
                            	C469.197144,512.966003 464.818634,512.281250 460.526672,515.075439 
                            	C456.735168,517.543823 455.372284,522.320312 457.262329,526.516113 
                            	C460.181366,532.996399 469.111115,533.900879 473.160889,527.760010 
                            	C475.201904,524.665100 477.360992,523.277710 480.870758,523.725891 
                            	C483.803284,524.100281 485.705170,522.458069 487.916809,520.783875 
                            	C495.712341,514.882568 499.521362,507.548981 497.753540,497.631989 
                            	C497.379395,495.533234 498.054352,493.243469 497.657196,491.153595 
                            	C496.037994,482.633392 501.503326,478.492767 507.388733,474.443024 
                            	C509.882507,475.808044 509.053375,478.029358 509.065308,479.860809 
                            	C509.138031,491.026428 508.910248,502.197083 509.159241,513.357605 
                            	C509.449738,526.377014 502.686432,534.703308 492.245941,541.282532 
                            	C482.123718,547.661194 471.406494,550.501282 459.501068,549.340515 
                            	C455.538025,548.954224 451.501526,549.391846 447.509338,549.212891 
                            	C443.965607,549.053955 442.754639,550.707031 442.883606,554.017517 
                            	C443.032715,557.845703 443.150909,561.687012 443.005615,565.512085 
                            	C442.786591,571.278076 439.516724,575.493591 433.925507,576.500549 
                            	C427.351318,577.684448 420.631683,577.797058 414.071960,576.351013 
                            	C407.968170,575.005432 405.383636,571.645325 404.929291,565.491211 
                            	C404.880280,564.827209 404.805450,564.147705 404.889130,563.494141 
                            	C405.981018,554.964844 404.849487,549.339111 394.220398,546.807129 
                            	C383.337585,544.214600 377.607697,534.398926 377.308197,523.199158 
                            	C376.452942,491.215698 376.783508,459.204254 378.118774,427.245392 
                            	C379.104187,403.661255 382.171021,380.204071 384.896851,356.747833 
                            	C384.990509,355.942017 384.979767,355.124084 385.053894,353.535675 
                            	C379.428802,354.004944 373.780548,351.454987 367.754974,356.440613 
                            	C376.902832,359.940826 376.027435,367.164398 375.983368,373.970154 
                            	C375.928345,382.460938 376.381165,390.962708 375.420105,399.439453 
                            	C374.660217,406.141541 370.757721,409.983673 364.038055,410.338531 
                            	C362.044373,410.443817 360.033264,410.452148 358.041779,410.324158 
                            	C351.438782,409.899841 346.840027,405.338379 346.738617,398.680267 
                            	C346.581329,388.350037 346.689056,378.015320 346.738434,367.682739 
                            	C346.755096,364.199738 347.623566,360.609955 350.743317,358.996460 
                            	C354.630859,356.985870 355.292145,354.052704 355.702179,350.212738 
                            	C356.355865,344.090424 360.987549,340.030884 367.173248,339.729980 
                            	C371.995911,339.495392 376.866119,339.288208 381.661133,339.699280 
                            	C386.494141,340.113647 388.199005,337.959076 388.629303,333.583527 
                            	C389.149658,328.291748 390.015594,323.034851 390.665955,317.754761 
                            	C391.880341,307.895752 396.292267,299.739288 403.918976,292.893433 
                            M417.809906,514.285278 
                            	C413.981720,514.266113 410.146820,514.096436 406.327087,514.266602 
                            	C401.746643,514.470703 399.847870,517.726318 399.777740,521.661743 
                            	C399.708344,525.559448 402.052155,528.310242 406.144623,528.701538 
                            	C409.447235,529.017273 412.796509,528.851196 416.125214,528.886230 
                            	C420.043091,528.927429 423.068878,527.612122 423.755127,523.332642 
                            	C424.439880,519.062439 423.211426,515.735596 417.809906,514.285278 
                            M418.173492,481.848846 
                            	C422.251648,481.127411 426.750916,482.742432 430.912872,480.571472 
                            	C429.403961,477.696045 427.550110,478.290253 425.995209,478.272064 
                            	C421.083557,478.214630 416.420654,478.889282 412.990326,473.416504 
                            	C410.575684,469.564209 403.798279,470.358124 400.555328,473.760986 
                            	C397.135925,477.349121 397.235382,483.432861 400.768738,486.809814 
                            	C404.611176,490.482178 410.078369,490.489349 413.677429,486.711548 
                            	C415.033112,485.288574 416.145325,483.633636 418.173492,481.848846 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M623.543518,668.442627 
                            	C644.913208,654.796509 673.071716,657.249146 688.632812,673.876282 
                            	C709.382629,696.047607 703.276123,732.641235 676.461609,746.863403 
                            	C675.013428,747.631531 673.618530,748.500061 671.985229,749.445496 
                            	C674.590515,754.159790 678.799255,753.921082 682.924377,753.630676 
                            	C687.139526,753.333862 689.631592,749.451965 693.830139,748.069031 
                            	C696.590149,751.521362 699.432739,754.968384 702.150879,758.510864 
                            	C704.390076,761.429016 701.728149,762.693481 699.972717,764.023926 
                            	C685.781860,774.779724 667.408020,773.933594 654.499634,761.029175 
                            	C648.997864,755.529053 643.186218,752.243774 635.741333,750.000671 
                            	C619.394348,745.075378 609.375366,733.164001 606.007080,716.663940 
                            	C602.098694,697.518616 607.598816,681.099487 623.543518,668.442627 
                            M678.016968,698.625183 
                            	C674.311279,684.583130 661.998230,676.512085 648.300049,679.128174 
                            	C632.357422,682.172852 625.617432,696.206604 626.660095,708.347229 
                            	C627.967163,723.567017 639.870911,734.465881 653.686401,733.621643 
                            	C669.213745,732.672913 681.968018,718.480408 678.016968,698.625183 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M369.913086,751.368042 
                            	C354.761993,751.361389 340.097076,751.242737 325.435059,751.398865 
                            	C321.405518,751.441711 319.849182,750.223389 319.868195,746.005127 
                            	C319.988495,719.344299 319.960114,692.682190 319.807953,666.021484 
                            	C319.784027,661.830627 321.340881,660.558838 325.385864,660.613037 
                            	C339.047516,660.796143 352.713013,660.685303 366.377045,660.701843 
                            	C371.589722,660.708130 376.664032,661.722534 381.578491,663.319458 
                            	C389.674286,665.950073 395.656677,670.752808 397.361084,679.662170 
                            	C399.068726,688.588501 396.777405,696.117310 389.763092,702.067261 
                            	C389.257568,702.496155 388.770721,702.948425 388.295471,703.410645 
                            	C388.192230,703.511047 388.176239,703.701172 388.099731,703.903809 
                            	C388.470734,705.212402 389.798279,705.308899 390.760773,705.854553 
                            	C399.121124,710.593445 403.115387,717.947144 402.711639,727.352112 
                            	C402.287384,737.234924 397.288696,744.343445 387.956482,748.011414 
                            	C382.342377,750.218018 376.478607,751.430664 369.913086,751.368042 
                            M347.732788,714.215454 
                            	C343.465759,713.656799 341.594757,715.335999 341.970001,719.799866 
                            	C342.275024,723.429077 342.047119,727.102783 342.061951,730.756775 
                            	C342.069977,732.737244 342.437042,734.577332 344.932922,734.546631 
                            	C354.376038,734.430176 363.889771,735.659851 373.233215,733.518921 
                            	C378.534180,732.304199 381.004669,728.838013 380.683014,723.862000 
                            	C380.333649,718.457642 375.802124,714.690857 368.604004,714.378357 
                            	C361.971680,714.090576 355.319855,714.251160 347.732788,714.215454 
                            M373.725037,693.109863 
                            	C378.102417,685.127747 375.272369,679.741333 366.318604,678.147339 
                            	C359.471039,676.928284 352.702789,678.168335 345.902039,678.002075 
                            	C343.180878,677.935547 342.054749,679.414246 342.094238,682.074402 
                            	C342.151093,685.902161 342.148956,689.733521 342.046021,693.559998 
                            	C341.966553,696.514771 343.198944,697.763733 346.211517,697.683777 
                            	C351.368561,697.546692 356.542480,697.849182 361.689148,697.580261 
                            	C365.822388,697.364319 370.041870,696.914490 373.725037,693.109863 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M558.135010,549.233215 
                            	C555.268250,548.979675 552.677979,549.884155 550.449402,548.071167 
                            	C550.831177,546.039856 552.515015,546.132141 553.850159,545.856384 
                            	C574.375732,541.617065 588.897034,529.857239 597.642456,510.891296 
                            	C598.583435,508.850586 599.496704,507.168762 602.049561,506.690887 
                            	C620.499634,503.237061 634.500244,493.571869 643.334167,476.796692 
                            	C643.706665,476.089325 644.111084,475.295013 645.342407,475.457489 
                            	C646.989319,476.954254 646.317627,479.077728 646.325134,480.943298 
                            	C646.380066,494.590851 646.406189,508.239380 646.296326,521.886414 
                            	C646.184814,535.727478 637.273865,546.640991 623.672607,548.822754 
                            	C619.225952,549.536072 618.240540,551.453918 618.388428,555.281311 
                            	C618.529663,558.936951 618.472595,562.605530 618.363464,566.264282 
                            	C618.194946,571.919067 615.138367,575.687927 609.495117,576.606079 
                            	C603.063721,577.652344 596.518555,577.491150 590.093018,576.669128 
                            	C584.317627,575.930237 581.020874,571.874329 580.741150,566.039062 
                            	C580.558105,562.219177 580.504150,558.374634 580.717407,554.559326 
                            	C580.931274,550.733032 579.565002,549.091797 575.586060,549.236084 
                            	C569.935364,549.441040 564.270447,549.251160 558.135010,549.233215 
                            M609.679321,528.855774 
                            	C611.845215,528.866455 614.013794,528.950195 616.176514,528.873169 
                            	C621.397522,528.687195 623.666931,526.502991 623.779541,521.675476 
                            	C623.889893,516.946472 621.494629,514.461670 616.424316,514.212891 
                            	C613.930908,514.090515 611.425903,514.112244 608.928772,514.175232 
                            	C603.086365,514.322571 599.464661,517.154419 599.421204,521.527222 
                            	C599.377136,525.958191 602.739624,528.590454 609.679321,528.855774 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M435.059570,681.803528 
                            	C436.652405,691.125305 435.694427,700.121704 435.989960,709.086060 
                            	C436.116028,712.911011 435.988434,716.745605 436.163025,720.567322 
                            	C436.481384,727.535828 439.934540,731.989929 445.896698,733.376038 
                            	C452.096832,734.817444 458.871460,731.616577 461.892242,725.865417 
                            	C463.572784,722.665894 463.881195,719.224426 463.924316,715.698608 
                            	C464.048523,705.548828 464.323822,695.399597 464.316528,685.250305 
                            	C464.313782,681.443054 465.961243,680.389648 469.487579,680.619446 
                            	C473.300018,680.867859 477.144928,680.785950 480.968353,680.646851 
                            	C484.225006,680.528503 485.320831,681.970093 485.309174,685.123474 
                            	C485.233551,705.597656 485.209534,726.072632 485.329346,746.546387 
                            	C485.351440,750.322021 483.822052,751.596008 480.266998,751.382507 
                            	C477.447540,751.213257 474.593933,751.166626 471.783173,751.399597 
                            	C467.174438,751.781494 463.744263,751.002869 464.535309,745.270142 
                            	C462.397766,744.785339 461.626404,746.386658 460.501465,747.215271 
                            	C444.098755,759.297302 420.513611,751.095642 415.309692,731.517273 
                            	C414.349548,727.904968 414.555786,724.231873 414.532990,720.597534 
                            	C414.457977,708.619019 414.608185,696.639038 414.665710,684.659668 
                            	C414.675140,682.689331 414.957214,680.786743 417.469177,680.826172 
                            	C423.252075,680.916809 429.078125,679.895996 435.059570,681.803528 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M499.346130,693.753296 
                            	C503.632721,684.822998 511.293121,681.393677 519.953308,680.026733 
                            	C530.640564,678.339722 541.148193,679.611816 551.371460,683.304932 
                            	C555.000671,684.616028 555.838318,686.424316 554.237061,690.080994 
                            	C550.095215,699.539551 550.255432,699.492310 540.173645,697.062439 
                            	C534.349487,695.658752 528.431946,694.560181 522.446289,696.401978 
                            	C520.089478,697.127197 518.127563,698.162842 518.044373,701.072876 
                            	C517.962769,703.929565 519.694214,705.479004 522.071167,706.080627 
                            	C527.541748,707.465210 533.100281,708.497986 538.596191,709.787964 
                            	C544.152649,711.092224 549.589966,712.816284 553.514465,717.282410 
                            	C560.742615,725.508057 558.523193,739.679626 548.802979,746.257202 
                            	C536.967590,754.266174 523.906128,753.356262 510.766815,750.726746 
                            	C506.523254,749.877563 502.466064,748.334961 498.622528,746.264282 
                            	C496.331146,745.029846 495.385040,743.490967 496.836121,741.043457 
                            	C498.927521,737.516052 499.391266,733.150513 502.541290,729.716553 
                            	C508.215942,732.654175 513.902771,735.334290 520.243103,736.252014 
                            	C524.769836,736.907166 529.201538,736.931274 533.543152,735.408020 
                            	C535.715759,734.645752 537.396179,733.216675 537.475403,730.757690 
                            	C537.553589,728.332581 535.583923,727.330444 533.726929,726.600342 
                            	C528.888977,724.698242 523.673889,724.434509 518.636841,723.391052 
                            	C514.867126,722.610229 511.178619,721.632446 507.764740,719.839905 
                            	C498.335052,714.888550 495.204956,705.454956 499.346130,693.753296 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M486.723724,563.812073 
                            	C486.943573,561.438538 485.865082,559.886719 484.780396,558.439453 
                            	C482.418884,555.288696 482.428558,552.767944 485.431274,549.742981 
                            	C488.292511,546.860535 490.506897,546.443115 494.053040,548.546204 
                            	C500.416962,552.320435 504.082214,550.806030 505.602356,543.582092 
                            	C506.679779,538.461975 509.973846,538.765991 513.758240,538.542786 
                            	C517.829346,538.302612 519.313416,540.218567 520.089600,543.851196 
                            	C521.525208,550.569641 525.431274,552.263367 531.178406,548.390076 
                            	C534.972229,545.833191 537.449097,546.947632 540.305054,549.695862 
                            	C543.196716,552.478394 543.542603,554.943054 541.235657,558.388367 
                            	C536.845337,564.945312 538.350159,568.377563 546.200928,570.028564 
                            	C549.841919,570.794250 550.617737,572.969421 550.437378,576.166565 
                            	C550.255676,579.386230 551.171631,582.677979 546.223877,583.730774 
                            	C537.704468,585.543518 536.393005,588.789917 541.329041,595.591736 
                            	C544.158752,599.491211 541.973511,601.487976 539.693176,604.081238 
                            	C537.193726,606.923767 534.714600,607.759644 531.567932,605.185608 
                            	C528.851135,602.963196 526.093506,601.610901 522.549072,603.900085 
                            	C520.223694,605.401917 519.933411,607.696594 519.447998,609.884216 
                            	C518.772705,612.927612 517.408752,614.577576 514.038086,614.390015 
                            	C510.724365,614.205566 507.130493,614.923218 506.119995,610.341370 
                            	C505.941223,609.530701 505.653931,608.742615 505.393646,607.951660 
                            	C503.496735,602.187622 499.800354,600.736694 494.841949,604.349792 
                            	C491.186462,607.013489 488.653229,606.877747 485.431091,603.565613 
                            	C482.403839,600.453735 482.103699,598.140686 484.669006,594.565979 
                            	C488.826263,588.773010 487.253448,584.962158 480.080902,583.588135 
                            	C475.809235,582.769836 474.793518,580.635986 474.758057,576.722900 
                            	C474.721558,572.694946 476.043091,570.309937 480.201599,569.969788 
                            	C483.840668,569.672119 486.026245,567.810547 486.723724,563.812073 
                            M514.109436,558.691711 
                            	C511.034393,558.398010 508.171112,559.262939 505.436096,560.486145 
                            	C496.798828,564.349365 492.813904,574.653442 496.633270,583.051025 
                            	C500.819641,592.255554 510.996399,596.162231 519.936890,591.996948 
                            	C526.430725,588.971497 531.192749,581.506958 530.573608,575.323669 
                            	C529.742920,567.028320 524.233093,561.261108 514.109436,558.691711 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M591.267090,699.000000 
                            	C591.270020,714.975037 591.170593,730.451172 591.343994,745.924255 
                            	C591.389404,749.973694 590.151672,751.711060 585.946777,751.407776 
                            	C582.139587,751.133057 578.279297,751.124512 574.474182,751.414856 
                            	C570.177979,751.742676 568.923645,749.755493 569.023682,745.842651 
                            	C569.185364,739.523254 568.893860,733.188965 569.155334,726.875977 
                            	C569.988647,706.749512 569.546021,686.616150 569.580444,666.487183 
                            	C569.587708,662.234558 570.759644,660.661621 575.221008,660.644592 
                            	C591.264221,660.583435 591.266052,660.435791 591.273987,676.535400 
                            	C591.277588,683.856934 591.269409,691.178467 591.267090,699.000000 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M415.468994,372.078918 
                            	C417.478607,372.652283 419.388672,373.162506 420.097137,374.622772 
                            	C422.664368,379.914215 427.039429,379.182068 431.824066,379.339661 
                            	C438.659851,379.564850 445.470825,378.834503 452.282745,379.321442 
                            	C453.869598,379.434906 455.303864,379.225739 456.377441,377.983917 
                            	C457.761292,376.383270 459.730316,374.876312 457.849579,372.413086 
                            	C456.302429,370.386780 454.654633,370.267700 452.213593,371.331177 
                            	C443.203033,375.256775 435.744446,370.147034 436.741364,360.965576 
                            	C437.240021,356.372864 440.924744,352.527161 445.413605,351.914459 
                            	C450.041779,351.282776 454.672455,353.640411 456.200073,358.172089 
                            	C458.662567,365.477112 463.082825,368.633362 471.061371,368.120911 
                            	C480.852386,367.492035 490.714172,367.963226 500.545349,367.962311 
                            	C501.711639,367.962189 502.880981,367.933838 504.043518,368.006042 
                            	C506.123474,368.135284 508.153259,368.388000 508.167084,371.207245 
                            	C508.181213,374.090698 506.168152,374.268829 504.052643,374.271362 
                            	C494.721344,374.282501 485.379059,374.554596 476.063141,374.177734 
                            	C470.933929,373.970276 466.957123,375.181274 464.068054,379.498871 
                            	C460.900360,384.232849 456.547882,385.924225 450.825775,385.455597 
                            	C445.198273,384.994720 439.499847,385.481476 433.838715,385.326721 
                            	C428.460480,385.179718 423.617462,385.223389 419.466949,389.991364 
                            	C416.403625,393.510437 411.482147,393.442535 407.548431,390.603149 
                            	C403.787720,387.888641 401.968170,384.088959 403.534393,379.243134 
                            	C405.241028,373.962860 408.445190,371.903412 415.468994,372.078918 
                            M451.267487,363.053375 
                            	C451.313629,359.395386 449.277313,357.805969 445.920410,358.431183 
                            	C442.934845,358.987244 442.687897,361.554047 443.396729,363.929871 
                            	C444.429932,367.392944 447.544495,367.248505 451.267487,363.053375 
                            M411.935699,385.731232 
                            	C414.117249,386.095459 415.959595,385.655304 416.669006,383.303955 
                            	C417.250854,381.375336 416.806732,379.621613 414.848755,378.705170 
                            	C413.228241,377.946655 411.546997,378.076599 410.345123,379.552277 
                            	C408.528992,381.782135 408.993164,383.791687 411.935699,385.731232 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M572.325562,611.515137 
                            	C571.711487,614.278564 570.022400,615.030762 567.800842,614.999756 
                            	C565.508972,614.967773 564.196655,613.896729 563.587952,611.583252 
                            	C562.776794,608.500732 560.709961,607.701416 557.859741,609.176941 
                            	C555.979431,610.150269 554.375000,609.929382 552.966858,608.288025 
                            	C551.506775,606.586182 551.080017,604.971191 552.555603,602.932373 
                            	C554.491821,600.257080 553.297180,598.164185 550.671448,596.906250 
                            	C548.621033,595.923889 548.215149,594.507935 548.520569,592.460510 
                            	C548.817810,590.467407 549.462646,589.155945 551.724792,588.677124 
                            	C555.324463,587.915344 557.235840,585.645142 556.203796,581.800842 
                            	C555.435486,578.939453 557.331726,577.884216 559.259155,576.859253 
                            	C561.075623,575.893372 562.834106,575.240845 564.552246,577.381104 
                            	C566.726990,580.090210 569.209290,580.239502 571.756348,577.641296 
                            	C573.580322,575.780640 575.621399,575.218994 577.993469,576.872009 
                            	C579.993164,578.265686 580.894531,579.753845 579.985779,582.331787 
                            	C578.813965,585.655823 580.830444,587.441223 583.817322,587.919983 
                            	C586.352295,588.326233 587.674255,589.506104 588.103271,591.966553 
                            	C588.549805,594.527527 587.494629,595.973083 585.131836,596.943298 
                            	C582.318054,598.098694 581.387085,600.300537 583.086365,602.964417 
                            	C584.404907,605.031311 584.146545,606.620605 582.565186,608.303894 
                            	C581.130432,609.831177 579.656555,610.265381 577.703674,609.211426 
                            	C575.314270,607.921814 573.573181,608.839355 572.325562,611.515137 
                            M573.316833,588.060059 
                            	C569.737427,585.664917 566.128784,585.336670 562.903992,588.495972 
                            	C560.063110,591.279114 559.058716,594.699524 560.957520,598.475037 
                            	C563.165100,602.864258 568.220093,604.243347 572.377563,601.697632 
                            	C577.121521,598.792664 577.706543,593.690369 573.316833,588.060059 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M466.697601,608.579590 
                            	C464.150452,608.756042 462.656433,609.778809 462.180176,612.086548 
                            	C461.729431,614.270630 460.089539,614.911987 458.096344,614.973450 
                            	C456.068176,615.035950 454.514191,614.296814 453.830475,612.267639 
                            	C452.645630,608.751221 450.468445,607.458191 446.939362,609.118347 
                            	C444.579010,610.228699 443.226471,608.788513 441.883240,607.197998 
                            	C440.515717,605.578857 441.023132,604.221985 442.250458,602.795044 
                            	C444.546539,600.125488 443.351105,598.169006 440.683746,596.895752 
                            	C438.612732,595.907104 437.535126,594.660522 437.972168,592.260132 
                            	C438.385345,589.990601 439.566467,588.982056 441.894135,588.524658 
                            	C445.509033,587.814148 447.462952,585.736938 445.973053,581.690735 
                            	C445.089935,579.292358 446.759583,578.068604 448.485199,576.884583 
                            	C450.340485,575.611694 451.752472,575.999512 453.287994,577.532288 
                            	C455.899109,580.138733 458.728699,580.873901 461.262390,577.430664 
                            	C463.213837,574.778625 465.401550,576.123657 467.512054,576.877747 
                            	C469.728149,577.669373 470.408264,579.221558 469.781281,581.618042 
                            	C468.821655,585.285767 470.590027,587.423523 474.214020,587.812317 
                            	C477.069641,588.118713 477.587616,590.162170 478.042725,592.288269 
                            	C478.512543,594.482971 477.308319,595.622253 475.321136,596.338745 
                            	C472.719177,597.277100 471.485779,599.157593 472.919189,601.769104 
                            	C473.951935,603.650574 475.699524,605.107605 473.749573,607.468018 
                            	C471.765625,609.869568 469.534576,609.716553 466.697601,608.579590 
                            M464.274750,599.823181 
                            	C465.675781,597.569336 467.164398,595.351807 466.144012,592.466858 
                            	C464.798920,588.663940 462.309143,586.361633 458.123260,586.285706 
                            	C453.945404,586.209961 451.221832,588.438171 449.817352,592.134888 
                            	C448.388550,595.895752 449.904297,599.079895 452.964691,601.242493 
                            	C456.640869,603.840271 460.402496,603.475525 464.274750,599.823181 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M490.998993,361.379639 
                            	C490.166748,361.380310 489.826111,361.333618 489.502319,361.387756 
                            	C477.191315,363.446442 467.440735,359.654083 460.699982,348.869659 
                            	C459.326996,346.673065 457.189758,346.070038 454.672729,346.132660 
                            	C450.515686,346.236145 446.348236,346.296265 442.195953,346.119995 
                            	C436.950958,345.897369 432.409241,346.216980 428.588654,351.031677 
                            	C425.301147,355.174561 418.861542,354.444336 415.227173,350.669312 
                            	C411.428345,346.723480 411.339935,340.003876 415.036041,336.142853 
                            	C418.908875,332.097107 425.422852,331.221252 428.838379,335.370026 
                            	C432.381500,339.673798 436.449097,340.063293 441.189240,339.727722 
                            	C441.685883,339.692535 442.196808,339.787994 442.684998,339.715027 
                            	C454.934448,337.885162 465.209961,340.759277 472.258362,351.788269 
                            	C474.030151,354.560730 476.963074,355.103119 480.165802,355.036194 
                            	C487.484070,354.883209 494.807495,354.889709 502.127625,354.957367 
                            	C504.653748,354.980713 508.041656,354.284729 508.073425,358.344330 
                            	C508.104828,362.354889 504.728546,361.207825 502.478027,361.313202 
                            	C498.825134,361.484131 495.159027,361.371918 490.998993,361.379639 
                            M424.309875,346.643158 
                            	C426.409729,345.095184 427.509949,343.251190 425.732483,340.814056 
                            	C424.498840,339.122498 422.695068,338.824890 420.894318,339.649750 
                            	C419.097534,340.472839 417.996246,342.122345 418.569122,344.058350 
                            	C419.274506,346.442200 420.768555,348.166351 424.309875,346.643158 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M409.242004,434.131989 
                            	C404.485962,431.594360 402.203918,427.898529 402.955872,422.913452 
                            	C403.628876,418.451630 406.245117,415.307220 410.834320,414.247650 
                            	C415.910828,413.075592 419.500488,415.341003 422.284515,419.384064 
                            	C422.746307,420.054688 423.276123,420.796112 423.957642,421.178497 
                            	C427.940643,423.413239 443.341156,421.020050 446.666168,417.709290 
                            	C451.973053,412.425201 457.264313,407.125458 462.574310,401.844543 
                            	C464.185425,400.242310 466.030670,398.743011 468.178528,400.693054 
                            	C470.455963,402.760803 468.816925,404.634857 467.269623,406.216156 
                            	C461.101440,412.519989 454.849640,418.742188 448.703888,425.067505 
                            	C447.067963,426.751251 445.243958,427.479889 442.931519,427.414551 
                            	C439.605408,427.320587 436.270477,427.485382 432.947540,427.345001 
                            	C427.865784,427.130280 423.255859,427.302795 419.690399,432.086792 
                            	C417.360107,435.213531 413.430176,435.610291 409.242004,434.131989 
                            M414.094360,420.523529 
                            	C411.255249,420.033997 409.621429,421.314514 409.218384,424.066437 
                            	C408.916901,426.125122 409.944275,427.615417 411.845795,428.340240 
                            	C413.614807,429.014587 415.218262,428.440826 416.126129,426.837128 
                            	C417.434509,424.525940 417.116730,422.394714 414.094360,420.523529 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M468.779297,526.831604 
                            	C465.253601,528.918091 462.693878,527.971619 460.990784,524.944824 
                            	C459.605194,522.482300 460.239899,520.086914 462.428162,518.328125 
                            	C464.613556,516.571655 466.996399,516.426880 469.146820,518.410095 
                            	C472.068512,521.104614 471.590179,523.881042 468.779297,526.831604 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M466.480621,485.424377 
                            	C463.651154,480.945557 463.941803,477.946259 467.215363,476.388641 
                            	C470.312805,474.914825 472.642029,476.115631 474.344391,478.868011 
                            	C475.568054,480.846466 475.095886,482.767548 473.796387,484.409515 
                            	C471.888550,486.820251 469.453308,487.209595 466.480621,485.424377 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M447.143127,496.674744 
                            	C450.259583,499.971802 450.159424,503.170135 446.956055,505.490814 
                            	C444.423462,507.325470 441.483856,506.730682 439.576172,503.943512 
                            	C438.236237,501.985718 438.324860,499.815094 439.741882,497.901123 
                            	C441.612244,495.374817 444.078430,495.129883 447.143127,496.674744 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M552.298462,372.635803 
                            	C555.380615,374.482300 555.908875,376.927002 554.668701,379.664581 
                            	C553.674805,381.858459 551.721863,382.702179 549.308899,382.343719 
                            	C546.847473,381.978119 545.500427,380.378632 544.999268,378.111115 
                            	C544.161255,374.318970 546.879578,372.157684 552.298462,372.635803 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M531.962891,299.899597 
                            	C530.265808,296.891022 530.457214,294.426605 533.002014,292.574432 
                            	C534.915833,291.181488 537.056030,291.311432 539.009399,292.630890 
                            	C541.018188,293.987823 541.589966,296.019928 541.100525,298.283905 
                            	C540.234985,302.287048 536.551025,303.066223 531.962891,299.899597 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M572.835938,310.521790 
                            	C573.525818,314.170898 572.360718,316.507721 569.008911,317.133850 
                            	C566.218018,317.655182 564.209229,316.248779 563.217651,313.615601 
                            	C562.279236,311.123962 562.961426,308.953094 565.269104,307.662781 
                            	C568.514526,305.848145 570.930359,307.157440 572.835938,310.521790 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M606.223877,435.702515 
                            	C601.495056,444.532013 593.835632,448.376526 585.491943,446.415314 
                            	C577.086975,444.439697 571.993896,437.697906 571.584595,428.006042 
                            	C571.081238,416.085052 577.851318,408.044495 588.630554,407.761322 
                            	C599.269897,407.481781 607.310059,415.926178 607.365356,427.455688 
                            	C607.378113,430.118958 607.502380,432.803253 606.223877,435.702515 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M586.663147,497.277130 
                            	C584.759338,501.062347 581.806213,501.173981 578.962524,499.742310 
                            	C576.373169,498.438751 575.451355,495.900024 576.564819,493.000305 
                            	C577.618164,490.257111 579.834290,489.218292 582.507019,489.896667 
                            	C586.029358,490.790741 587.685974,493.172974 586.663147,497.277130 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M602.543274,328.775818 
                            	C607.355286,326.920105 610.203735,327.899323 611.087463,331.444366 
                            	C611.715271,333.962830 610.891052,336.013428 608.672241,337.377777 
                            	C606.625793,338.636078 604.480408,338.606506 602.767639,336.900970 
                            	C600.377075,334.520447 599.845215,331.820068 602.543274,328.775818 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M615.219666,373.111145 
                            	C618.928894,373.397644 620.774475,375.340912 620.747864,378.592041 
                            	C620.728882,380.911224 619.350891,382.655426 616.895996,383.131744 
                            	C614.302979,383.634888 612.169128,382.676239 611.130615,380.315521 
                            	C609.490234,376.586761 611.262451,374.331665 615.219666,373.111145 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M558.709595,481.581970 
                            	C559.266296,485.401093 558.067200,487.796112 554.368835,488.271576 
                            	C551.762512,488.606628 549.747009,487.604584 549.118713,484.897064 
                            	C548.480347,482.146179 549.617676,479.998016 552.062500,478.695374 
                            	C555.115112,477.068970 557.041748,478.692932 558.709595,481.581970 
                            z" />
                    <path fill="#000000" opacity="1.000000" stroke="none" d="
                            M408.572601,485.492401 
                            	C405.351410,485.998810 403.387543,484.738251 402.223663,482.207825 
                            	C401.391083,480.397614 401.603180,478.632904 402.939392,477.099396 
                            	C404.318573,475.516510 405.993561,474.447662 408.181152,474.903198 
                            	C410.287415,475.341827 411.832306,476.585785 412.204559,478.803925 
                            	C412.696014,481.732513 411.737549,484.036102 408.572601,485.492401 
                            z" />
                </svg>
            </div>
            <!-- Slogan -->
            <p class="text-lg text-slate-600 dark:text-slate-300">Innovating the Future, One Step at a Time</p>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <header
            class="h-20 bg-white/80 dark:bg-slate-800/50 backdrop-blur-sm border-b border-slate-200 dark:border-slate-700 p-4 shadow-md flex items-center justify-between flex-shrink-0">
            <h2 id="view-title" class="text-2xl font-bold text-slate-900 dark:text-white">Dashboard</h2>
            <div class="flex items-center gap-4">
                <div class="relative">
                    <input type="text" placeholder="Search..."
                        class="w-64 px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-sky-500">
                    <i
                        class="ph ph-magnifying-glass absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-400"></i>
                </div>
                <button
                    class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-300"><i
                        class="ph-bold ph-bell text-xl"></i></button>
                <button
                    class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-300"><i
                        class="ph-bold ph-gear text-xl"></i></button>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto overflow-x-hidden bg-slate-100 dark:bg-slate-900">
            <main id="dashboard-view" class="admin-view p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-6">
                    <!-- Stat Cards -->
                    <div class="bg-white dark:bg-slate-800 p-5 rounded-xl flex items-center gap-5">
                        <div class="bg-sky-500/10 p-3 rounded-lg"><i class="ph-bold ph-bus text-2xl text-sky-500"></i>
                        </div>
                        <div>
                            <h3 class="text-3xl font-bold text-slate-900 dark:text-white" id="total-buses-stat">--
                            </h3>
                            <p class="text-sm text-slate-500 dark:text-slate-400">Total Buses</p>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-slate-800 p-5 rounded-xl flex items-center gap-5">
                        <div class="bg-green-500/10 p-3 rounded-lg"><i
                                class="ph-bold ph-clock-countdown text-2xl text-green-400"></i></div>
                        <div>
                            <h3 class="text-3xl font-bold text-slate-900 dark:text-white" id="on-time-stat">--%</h3>
                            <p class="text-sm text-slate-500 dark:text-slate-400">On Time Rate</p>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-slate-800 p-5 rounded-xl flex items-center gap-5">
                        <div class="bg-amber-500/10 p-3 rounded-lg"><i
                                class="ph-bold ph-users text-2xl text-amber-400"></i></div>
                        <div>
                            <h3 class="text-3xl font-bold text-slate-900 dark:text-white" id="capacity-stat">--%
                            </h3>
                            <p class="text-sm text-slate-500 dark:text-slate-400">Passenger Capacity</p>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-slate-800 p-5 rounded-xl flex items-center gap-5">
                        <div class="bg-red-500/10 p-3 rounded-lg"><i
                                class="ph-bold ph-warning text-2xl text-red-400"></i></div>
                        <div>
                            <h3 class="text-3xl font-bold text-slate-900 dark:text-white" id="alerts-stat">--</h3>
                            <p class="text-sm text-slate-500 dark:text-slate-400">Active Alerts</p>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                    <div class="xl:col-span-2 bg-white dark:bg-slate-800 p-4 rounded-xl shadow-lg">
                        <h2 class="text-lg font-semibold mb-4 text-slate-900 dark:text-white">Live Fleet Status</h2>
                        <div id="map" class="h-[450px] w-full rounded-lg z-0"></div>
                    </div>
                    <div class="bg-white dark:bg-slate-800 p-4 rounded-xl shadow-lg">
                        <h2 class="text-lg font-semibold mb-4 text-slate-900 dark:text-white">Alerts & Notifications
                        </h2>
                        <div id="alerts-container" class="space-y-2 max-h-[450px] overflow-y-auto"></div>
                    </div>

                    <div class="xl:col-span-3 bg-white dark:bg-slate-800 p-4 rounded-xl shadow-lg">
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-4">
                            <h2 class="text-lg font-semibold text-slate-900 dark:text-white">Performance Analytics
                            </h2>
                            <div id="chart-nav"
                                class="flex items-center gap-1 p-1 rounded-lg bg-slate-100 dark:bg-slate-700 self-start">
                                <button class="chart-nav-btn active" data-chart="optimization">Optimization</button>
                                <button class="chart-nav-btn" data-chart="forecast">Forecast</button>
                                <button class="chart-nav-btn" data-chart="demographics">Demographics</button>
                            </div>
                        </div>
                        <div class="relative h-80">
                            <div id="optimizationChartContainer" class="chart-container absolute inset-0">
                                <canvas id="optimizationChart"></canvas>
                            </div>
                            <div id="forecastChartContainer" class="chart-container absolute inset-0 hidden">
                                <canvas id="forecastChart"></canvas>
                            </div>
                            <div id="demographicsChartContainer"
                                class="chart-container absolute inset-0 hidden flex items-center justify-center">
                                <div class="relative h-full w-full max-w-xs">
                                    <canvas id="demographicsChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <main id="live-buses-view" class="admin-view hidden p-6">
                <h1 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">Operations Overview</h1>

                <div class="space-y-4">

                    <!-- Live Buses -->
                    <div class="bg-white dark:bg-slate-800 rounded-xl shadow overflow-hidden">
                        <button
                            class="w-full flex justify-between items-center px-4 py-3 text-left font-semibold text-slate-800 dark:text-white bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition"
                            data-collapse="live-buses-tab">
                            <span><i class="ph-bold ph-bus mr-2"></i> Live Buses</span>
                            <i class="ph-bold ph-caret-down"></i>
                        </button>
                        <div id="live-buses-tab" class="hidden border-t border-slate-200 dark:border-slate-700 p-4">
                            <div class="overflow-x-auto">
                                <table class="min-w-full text-sm">
                                    <thead class="bg-slate-50 dark:bg-slate-700/50">
                                        <tr>
                                            <th class="px-4 py-2 text-left">Bus ID</th>
                                            <th class="px-4 py-2 text-left">Route</th>
                                            <th class="px-4 py-2 text-left">Occupancy</th>
                                            <th class="px-4 py-2 text-left">Next Stop</th>
                                            <th class="px-4 py-2 text-left">ETA</th>
                                            <th class="px-4 py-2 text-left">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="live-buses-body" class="divide-y divide-slate-200 dark:divide-slate-700">
                                        <!-- Bus rows injected by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Schedules -->
                    <main id="schedules-view" class="admin-view hidden p-6">
                        <h1 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">Schedules Management</h1>

                        <div class="bg-white dark:bg-slate-800 rounded-xl shadow overflow-hidden">
                            <button
                                class="w-full flex justify-between items-center px-4 py-3 text-left font-semibold text-slate-800 dark:text-white bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition"
                                data-collapse="schedules-list-tab">
                                <span><i class="ph-bold ph-calendar mr-2"></i> Bus Schedules</span>
                                <i class="ph-bold ph-caret-down"></i>
                            </button>
                            <div id="schedules-list-tab"
                                class="hidden border-t border-slate-200 dark:border-slate-700 p-4">
                                <div id="schedules-container" class="space-y-2 text-sm">
                                    <!-- Example schedule row -->
                                    <div class="p-3 rounded-lg bg-slate-100 dark:bg-slate-700/40 flex justify-between">
                                        <span>üöå Bus #101 ‚Üí Route A</span>
                                        <span class="text-slate-500 dark:text-slate-400">09:30 AM</span>
                                    </div>
                                    <div class="p-3 rounded-lg bg-slate-100 dark:bg-slate-700/40 flex justify-between">
                                        <span>üöå Bus #102 ‚Üí Route B</span>
                                        <span class="text-slate-500 dark:text-slate-400">09:45 AM</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>


                    <!-- Demand Forecast -->
                    <main id="forecast-view" class="admin-view hidden p-6">
                        <h1 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">Demand Forecast Analysis
                        </h1>

                        <div class="bg-white dark:bg-slate-800 rounded-xl shadow p-4">
                            <canvas id="forecastViewChart" class="w-full h-80"></canvas>
                        </div>
                    </main>


                </div>
            </main>

        </div>
    </div>
    </div>

    <!-- Chatbot -->
    <div id="chatbot-container">
        <div id="chatbot-bubble">
            <i class="ph-fill ph-chat-circle-text text-2xl"></i>
        </div>

        <div id="chatbot-window">
            <div id="chat-header">
                <div class="chat-header-info">
                    <div class="chat-header-avatar"></div>
                    <div class="chat-header-text">
                        <div class="name">BUSIQ Bot</div>
                        <div class="status">Online</div>
                    </div>
                </div>
                <button id="chat-close-btn">&times;</button>
            </div>
            <div id="chat-messages"></div>
            <div class="p-3 border-t border-slate-300 dark:border-slate-600 flex gap-2">
                <input id="chat-input" type="text" placeholder="Type a message..."
                    class="flex-1 px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-700 focus:outline-none">
                <button id="chat-send-btn"
                    class="bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded-lg">Send</button>
            </div>
        </div>
    </div>


    <script>

        const chatBubble = document.getElementById("chatbot-bubble");
        const chatWindow = document.getElementById("chatbot-window");
        const chatClose = document.getElementById("chat-close-btn");
        const chatMessages = document.getElementById("chat-messages");
        const chatInput = document.getElementById("chat-input");
        const chatSend = document.getElementById("chat-send-btn");

        function addMessage(text, sender = "bot") {
            const msg = document.createElement("div");
            msg.classList.add("chat-bubble", sender === "user" ? "user-msg" : "bot-msg");
            msg.textContent = text;
            chatMessages.appendChild(msg);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function botReply(userText) {
            let reply = null;

            // Normalize input
            const text = userText.toLowerCase();

            // --- FAQ Mode ---
            if (/hello|hi|hey/.test(text)) {
                reply = "üëã Hey! I‚Äôm BUSIQ Bot. Ask me about buses, alerts, schedules, or stats.";
            }
            else if (/help|support/.test(text)) {
                reply = "üí° You can ask: 'how many buses?', 'alerts now', 'on-time rate', 'show forecast', etc.";
            }
            else if (/schedule/.test(text)) {
                reply = "üìÖ You can view schedules in the **Schedules Management** section of the dashboard.";
            }

            // --- Live Info Mode ---
            else if (/how many buses|total buses/.test(text)) {
                fetch("http://127.0.0.1:5000/api/performance")
                    .then(res => res.json())
                    .then(data => {
                        addMessage(`üöå Total buses right now: ${data.stats.totalBuses}`, "bot");
                    })
                    .catch(() => addMessage("‚ö†Ô∏è Couldn‚Äôt fetch live bus count.", "bot"));
                return;
            }
            else if (/on.?time/.test(text)) {
                fetch("http://127.0.0.1:5000/api/performance")
                    .then(res => res.json())
                    .then(data => {
                        addMessage(`‚è±Ô∏è Current On-Time Rate: ${data.stats.onTimeRate}%`, "bot");
                    })
                    .catch(() => addMessage("‚ö†Ô∏è Couldn‚Äôt fetch on-time stats.", "bot"));
                return;
            }
            else if (/alerts|issues|problems/.test(text)) {
                if (state.alerts && state.alerts.length > 0) {
                    const latest = state.alerts.slice(-3).map(a => `‚ö†Ô∏è Route ${a.route}: ${a.message}`).join("\n");
                    reply = `Here are the latest alerts:\n${latest}`;
                } else {
                    reply = "‚úÖ No active alerts right now.";
                }
            }
            else if (/forecast|prediction|demand/.test(text)) {
                fetch("http://127.0.0.1:5000/api/performance")
                    .then(res => res.json())
                    .then(data => {
                        const avg = Math.round(data.forecast.reduce((a, b) => a + b, 0) / data.forecast.length);
                        addMessage(`üìä Demand forecast shows an avg of **${avg} passengers** expected soon.`, "bot");
                    })
                    .catch(() => addMessage("‚ö†Ô∏è Couldn‚Äôt fetch forecast data.", "bot"));
                return;
            }

            else if (/live buses|show buses|bus list/.test(text)) {
                if (state.buses && state.buses.length > 0) {
                    const sample = state.buses.slice(0, 3).map(b =>
                        `üöå Bus ${b.id || b.bus_id} on ${b.route_name || "Route"} ‚Üí ${b.next_stop || "‚Äî"} (${b.eta || "N/A"} min)`
                    ).join("\n");
                    reply = `Here are some live buses:\n${sample}\n‚Ä¶ and more on the dashboard map.`;
                } else {
                    reply = "‚ö†Ô∏è No live bus data available.";
                }
            }

            else if (/optimization/.test(text)) {
                fetch("http://127.0.0.1:5000/api/performance")
                    .then(res => res.json())
                    .then(data => {
                        addMessage(`üìà Optimization: Avg Wait Before ${data.optimization.before[0]} ‚Üí After ${data.optimization.after[0]} mins.`, "bot");
                    });
                return;
            }
            else if (/demographics/.test(text)) {
                fetch("http://127.0.0.1:5000/api/performance")
                    .then(res => res.json())
                    .then(data => {
                        const demo = data.demographics.labels.map((l, i) => `${l}: ${data.demographics.data[i]}%`).join(", ");
                        addMessage(`üë• Rider demographics: ${demo}`, "bot");
                    });
                return;
            }

            // --- Default fallback ---
            if (!reply) {
                reply = "ü§î I didn‚Äôt get that. Try asking about buses, alerts, performance, or schedules!";
            }

            // Add response with delay
            setTimeout(() => addMessage(reply, "bot"), 600);
        }


        chatBubble.addEventListener("click", () => chatWindow.style.display = "flex");
        chatClose.addEventListener("click", () => chatWindow.style.display = "none");

        chatSend.addEventListener("click", () => {
            const text = chatInput.value.trim();
            if (!text) return;
            addMessage(text, "user");
            chatInput.value = "";
            botReply(text);
        });

        const canvas = document.getElementById("poly-grid-bg");
        const ctx = canvas.getContext("2d");
        const state = {};
        let globalMouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initPolyGrid(ctx, canvas, state);
        }

        // Init Function
        function initPolyGrid(context, targetCanvas, state) {
            state.polygons = [];
            let polyCount = Math.floor(targetCanvas.width / 50);
            for (let i = 0; i < polyCount; i++) {
                state.polygons.push({
                    x: Math.random() * targetCanvas.width,
                    y: Math.random() * targetCanvas.height,
                    z: Math.random(),
                    size: Math.random() * 50 + 20,
                    angle: Math.random() * Math.PI * 2,
                    rotSpeed: (Math.random() - 0.5) * 0.01,
                });
            }
        }

        // Render Function
        function renderPolyGrid(c, t, s) {
            const theme = document.documentElement.classList.contains("dark") ? "dark" : "light";
            c.fillStyle = theme === "light" ? "#f4f7fc" : "#02020a";
            c.fillRect(0, 0, t.width, t.height);
            if (!s.polygons) return;

            let parallaxX = (globalMouse.x - t.width / 2) * 0.1;
            let parallaxY = (globalMouse.y - t.height / 2) * 0.1;
            s.polygons.sort((a, b) => a.z - b.z);

            s.polygons.forEach((p) => {
                p.angle += p.rotSpeed;
                let displayX = p.x - parallaxX * p.z;
                let displayY = p.y - parallaxY * p.z;
                c.save();
                c.translate(displayX, displayY);
                c.rotate(p.angle);
                c.strokeStyle = `rgba(${theme === "light" ? "0, 86, 179" : "74, 144, 226"}, ${p.z * 0.8})`;
                c.lineWidth = p.z * 2;
                c.beginPath();
                c.moveTo(p.size, 0);
                c.lineTo(p.size * Math.cos((Math.PI * 2) / 3), p.size * Math.sin((Math.PI * 2) / 3));
                c.lineTo(p.size * Math.cos((Math.PI * 4) / 3), p.size * Math.sin((Math.PI * 4) / 3));
                c.closePath();
                c.stroke();
                c.restore();
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            renderPolyGrid(ctx, canvas, state);
        }

        window.addEventListener("resize", resizeCanvas);
        window.addEventListener("mousemove", (e) => {
            globalMouse.x = e.clientX;
            globalMouse.y = e.clientY;
        });

        resizeCanvas();
        animate();

        document.addEventListener('DOMContentLoaded', () => {
            // --- STATE & ELEMENTS ---
            const state = {
                buses: [],
                alerts: [],
                activeAdminView: 'dashboard',
                activeChart: 'optimization'
            };
            const elements = {
                loadingOverlay: document.getElementById('loading-overlay'),
                themeToggle: document.getElementById('theme-toggle'),
                viewToggle: document.getElementById('view-toggle'),
                sidebar: document.getElementById('sidebar'),
                adminViews: document.querySelectorAll('.admin-view'),
                navLinks: document.querySelectorAll('.nav-link'),
                chartNavButtons: document.querySelectorAll('.chart-nav-btn'),
                chartContainers: document.querySelectorAll('.chart-container'),
                headerBell: document.querySelector('header .ph-bell'),
                headerGear: document.querySelector('header .ph-gear'),
                mobileNavBtns: document.querySelectorAll('.mobile-nav-btn'),
                mobileContents: document.querySelectorAll('.mobile-content'),
            };

            let adminMap, passengerMap, optimizationChartInstance, forecastChartInstance, demographicsChartInstance;
            let lightTileLayer, darkTileLayer, passengerLightTileLayer, passengerDarkTileLayer;

            const setLoading = (isLoading) => elements.loadingOverlay.classList.toggle('hidden', !isLoading);

            const fetchInitialPerformanceData = async () => {
                const backendUrl = 'http://127.0.0.1:5000';
                console.log(`Fetching initial data from: ${backendUrl}/api/performance`);
                try {
                    const response = await fetch(`${backendUrl}/api/performance`);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return await response.json();
                } catch (error) {
                    console.error(`Could not fetch performance data:`, error);
                    return { stats: {}, optimization: { before: [], after: [] }, forecast: [], demographics: { labels: [], data: [] } };
                }
            };

            // --- UI UPDATE FUNCTIONS ---
            const updateChartVisibility = () => {
                elements.chartContainers.forEach(container => {
                    const chartName = container.id.replace('Container', '');
                    container.classList.toggle('hidden', chartName !== state.activeChart + 'Chart');
                });
            };

            const updateDashboard = (data) => {
                if (!data) return;

                if (data.buses) state.buses = data.buses;
                if (data.alerts) state.alerts = data.alerts;

                if (data.performance) {
                    updateStatCards(data.performance.stats);
                    updateOptimizationChart(data.performance.optimization);
                    updateDemandForecastChart(data.performance.forecast);
                    updateDemographicsChart(data.performance.demographics);
                }

                updateBusMarkers();
                displayAlerts(state.alerts);
                updateChartVisibility();
            };

            const updateStatCards = (stats) => {
                if (!stats) return;
                document.getElementById('total-buses-stat').textContent = stats.totalBuses;
                document.getElementById('on-time-stat').textContent = `${stats.onTimeRate}%`;
                document.getElementById('capacity-stat').textContent = `${stats.passengerCapacity}%`;
                document.getElementById('alerts-stat').textContent = stats.activeAlerts;
            };



            const updateBusMarkers = () => {
                if (!adminMap || !state.buses) return;
                if (window.busMarkersLayer) window.busMarkersLayer.clearLayers();

                const markers = [];
                state.buses.forEach(bus => {
                    // --- Fix: use fallback values ---
                    const busId = bus.id || bus.bus_id || bus.bus_number || "N/A";
                    const route = bus.route_name || `Route ${bus.route_id}`;
                    const occupancyPercent = bus.occupancy
                        ? `${(bus.occupancy * 100).toFixed(0)}%`
                        : (bus.current_occupancy && bus.capacity
                            ? `${Math.round((bus.current_occupancy / bus.capacity) * 100)}%`
                            : "N/A");
                    const nextStop = bus.next_stop || "‚Äî";
                    const eta = bus.eta !== undefined ? `${bus.eta} min` : "‚Äî";

                    // --- Pick route color ---
                    const getRouteColor = (routeStr) => {
                        const colors = ['#38bdf8', '#34d399', '#facc15', '#fb923c', '#f87171'];
                        let hash = 0;
                        for (let i = 0; i < routeStr.length; i++) {
                            hash = routeStr.charCodeAt(i) + ((hash << 5) - hash);
                        }
                        return colors[Math.abs(hash) % colors.length];
                    };
                    const routeColor = getRouteColor(route.toString());

                    // --- Marker with popup ---
                    const iconHtml = `
            <div class="relative flex flex-col items-center" style="transform: translate(-50%, -100%);">
                <i class="ph-fill ph-bus text-3xl" style="color: ${routeColor};"></i>
                <span class="absolute -top-1 font-bold text-xs text-white px-1.5 py-0.5 rounded" style="background-color: ${routeColor};">
                    ${route}
                </span>
            </div>`;
                    const busIcon = L.divIcon({
                        html: iconHtml,
                        className: 'bus-icon',
                        iconSize: [40, 40],
                        iconAnchor: [20, 40]
                    });

                    const popupContent = `
            <strong>Bus #${busId}</strong><br>
            Route: <span class="font-semibold">${route}</span><br>
            Occupancy: <span class="font-semibold">${occupancyPercent}</span><br>
            Next Stop: <span class="font-semibold">${nextStop}</span><br>
            ETA: <span class="font-semibold">${eta}</span>
        `;

                    if (bus.lat && bus.lng) {
                        const marker = L.marker([bus.lat, bus.lng], { icon: busIcon }).bindPopup(popupContent);
                        markers.push(marker);
                    }
                });
                window.busMarkersLayer = L.layerGroup(markers).addTo(adminMap);
            };

            function updateForecastViewChart(data) {
                const ctx = document.getElementById('forecastViewChart').getContext('2d');
                const colors = document.documentElement.classList.contains('dark')
                    ? { gridColor: '#334155', tickColor: '#94a3b8', lineColor: '#0ea5e9' }
                    : { gridColor: '#e2e8f0', tickColor: '#64748b', lineColor: '#0284c7' };

                if (window.forecastViewChartInstance) window.forecastViewChartInstance.destroy();

                const labels = Array.from({ length: 9 }, (_, i) =>
                    new Date(Date.now() + i * 15 * 60000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                );

                window.forecastViewChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels,
                        datasets: [{
                            label: 'Predicted Volume',
                            data,
                            borderColor: colors.lineColor,
                            backgroundColor: 'rgba(14,165,233,0.1)',
                            tension: 0.3,
                            fill: true,
                            pointBackgroundColor: colors.lineColor
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { grid: { color: colors.gridColor }, ticks: { color: colors.tickColor } },
                            x: { grid: { display: false }, ticks: { color: colors.tickColor } }
                        },
                        plugins: {
                            legend: { labels: { color: colors.tickColor } }
                        }
                    }
                });
            }


            const displayAlerts = (alerts) => {
                const container = document.getElementById('alerts-container');
                if (!alerts || !container) return;
                container.innerHTML = alerts.slice(-5).reverse().map(alert => { // Show latest 5 alerts
                    const iconInfo = {
                        delay: { icon: 'ph-fill ph-timer', color: 'text-amber-400' },
                        reroute: { icon: 'ph-fill ph-arrows-split', color: 'text-red-400' },
                        traffic: { icon: 'ph-fill ph-car', color: 'text-orange-400' },
                        maintenance: { icon: 'ph-fill ph-wrench', color: 'text-blue-400' },
                        default: { icon: 'ph-fill ph-info', color: 'text-sky-400' }
                    };
                    const info = iconInfo[alert.type] || iconInfo.default;
                    return `<div class="flex items-start p-3 rounded-lg bg-slate-100 dark:bg-slate-700/50">
                        <i class="${info.icon} ${info.color} text-xl mr-3 mt-1"></i>
                        <div>
                            <p class="font-semibold text-slate-800 dark:text-white">Route ${alert.route}</p>
                            <p class="text-sm text-slate-500 dark:text-slate-400">${alert.message}</p>
                        </div>
                    </div>`;
                }).join('');
            };

            const getChartColors = () => {
                const isDark = document.documentElement.classList.contains('dark');
                return {
                    gridColor: isDark ? '#334155' : '#e2e8f0',
                    tickColor: isDark ? '#94a3b8' : '#64748b',
                    legendColor: isDark ? '#94a3b8' : '#64748b',
                };
            };

            const updateOptimizationChart = (data) => {
                const colors = getChartColors();
                const ctx = document.getElementById('optimizationChart').getContext('2d');
                if (optimizationChartInstance) optimizationChartInstance.destroy();
                optimizationChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Avg. Wait Time', 'Fleet Usage', 'On-Time Perf.'],
                        datasets: [
                            { label: 'Before', data: data.before, backgroundColor: '#94a3b8', borderRadius: 4, maxBarThickness: 50 },
                            { label: 'After', data: data.after, backgroundColor: '#0ea5e9', borderRadius: 4, maxBarThickness: 50 }
                        ]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: colors.legendColor } },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        let label = context.dataset.label || '';
                                        if (label) { label += ': '; }
                                        let value = context.parsed.y;
                                        if (context.dataIndex === 0) {
                                            label += value.toFixed(1) + ' mins';
                                        } else {
                                            label += value.toFixed(1) + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { grid: { color: colors.gridColor }, ticks: { color: colors.tickColor } },
                            x: { grid: { color: colors.gridColor }, ticks: { color: colors.tickColor } }
                        }
                    }
                });
            };

            const updateDemandForecastChart = (data) => {
                const colors = getChartColors();
                const ctx = document.getElementById('forecastChart').getContext('2d');
                if (forecastChartInstance) forecastChartInstance.destroy();
                const labels = Array.from({ length: 9 }, (_, i) => new Date(Date.now() + i * 15 * 60000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
                forecastChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels,
                        datasets: [{
                            label: 'Predicted Volume', data,
                            fill: true, backgroundColor: 'rgba(14, 165, 233, 0.1)',
                            borderColor: '#0ea5e9', pointBackgroundColor: '#0ea5e9',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    title: function (context) {
                                        return `At ${context[0].label}`;
                                    },
                                    label: function (context) {
                                        return `Predicted Volume: ${context.parsed.y}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { grid: { color: colors.gridColor }, ticks: { color: colors.tickColor } },
                            x: { grid: { display: false }, ticks: { color: colors.tickColor } }
                        }
                    }
                });
            };

            const updateDemographicsChart = (data) => {
                const colors = getChartColors();
                const ctx = document.getElementById('demographicsChart').getContext('2d');
                if (demographicsChartInstance) demographicsChartInstance.destroy();
                demographicsChartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Rider Demographics',
                            data: data.data,
                            backgroundColor: ['#0ea5e9', '#0891b2', '#0e7490', '#155e75'],
                            borderColor: document.documentElement.classList.contains('dark') ? '#1e293b' : '#ffffff',
                            borderWidth: 4,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: { color: colors.legendColor, boxWidth: 12, padding: 20 }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        let label = context.label || '';
                                        if (label) { label += ': '; }
                                        if (context.parsed !== null) {
                                            label += context.parsed + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            };


            // --- EVENT LISTENERS ---
            elements.chartNavButtons.forEach(button => {
                button.addEventListener('click', () => {
                    state.activeChart = button.dataset.chart;
                    elements.chartNavButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    updateChartVisibility();
                });
            });

            elements.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    // ... (rest of navLink listener)
                });
            });
            // ... (other listeners)

            // --- THEME MANAGEMENT ---
            const applyTheme = (isDark) => {
                document.documentElement.classList.toggle('dark', isDark);
                localStorage.theme = isDark ? 'dark' : 'light';

                // ... (rest of theme logic)

                // Redraw charts with new theme colors
                fetchInitialPerformanceData().then(performance => {
                    updateDashboard({ performance });
                });
            };

            elements.themeToggle.addEventListener('click', () => {
                applyTheme(!document.documentElement.classList.contains('dark'));
            });

            // --- INITIALIZATION ---
            function initAdminMap() {
                if (adminMap) { adminMap.remove(); }
                adminMap = L.map('map').setView([34.0522, -118.2437], 13);

                darkTileLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; CARTO' });
                lightTileLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; CARTO' });

                if (document.documentElement.classList.contains('dark')) darkTileLayer.addTo(adminMap);
                else lightTileLayer.addTo(adminMap);
            }

            // --- MERGED AND CORRECTED STARTUP LOGIC ---
            function startApp() {
                // Connect to the WebSocket server
                const socket = io("http://127.0.0.1:5000");

                socket.on("connect", () => {
                    console.log("Successfully connected to the backend WebSocket server!");
                });

                socket.on("update_data", (data) => {
                    console.log("Received live data update:", data);
                    updateDashboard({ buses: data.buses, alerts: data.alerts });
                });

                // Set theme from localStorage on initial load
                const initialIsDark = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
                applyTheme(initialIsDark);

                initAdminMap();
            }

            startApp();
        });
    </script>
</body>

</html>
